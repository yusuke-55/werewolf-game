# 人狼AIプロトタイプ

AI同士で行う人狼ゲームの実装プロトタイプです。

## 特徴

- ✅ 9人のAIプレイヤーによる完全自動プレイ
- ✅ 6つの役職実装（村人、人狼、占い師、霊媒師、騎士、狂人）
- ✅ 昼夜フェーズの実装
- ✅ **ブラウザでリアルタイム観戦可能**
- ✅ **美しいダークテーマUI**
- ✅ **Server-Sent Eventsによるリアルタイム更新**
- ✅ TypeScript + オブジェクト指向設計
- 🚧 将来的にLaravel + React + MySQLへ拡張可能

## セットアップ

```bash
# 依存関係をインストール
npm install
```

## 実行

### ブラウザ版（推奨）

```bash
# 開発モード
npm run dev

# ブラウザでアクセス
# http://localhost:3002
```

ブラウザで `http://localhost:3002` を開いて、「ゲーム開始」ボタンをクリックするとゲームが始まります。

### コンソール版

```bash
# コンソールで実行
npm run dev:console

# ビルドして実行
npm run build
npm start
```

## Dockerでの実行

```bash
# コンテナをビルドして起動
docker-compose up --build

# バックグラウンドで実行
docker-compose up -d
```

## ゲーム仕様

### プレイヤー構成
- **人数**: 9人（全員AI）
- **配役**:
  - 村人: 3人
  - 人狼: 2人
  - 占い師: 1人
  - 霊媒師: 1人
  - 騎士: 1人
  - 狂人: 1人

### ゲームフロー
1. **昼フェーズ**
   - 全生存者が発言
   - 投票により1名を処刑
   
2. **夜フェーズ**
   - 人狼が1名を襲撃
   - 占い師が1名を占う
   - 霊媒師は処刑者の正体を知る
   - 騎士が1名を護衛
   - 狂人は行動なし

### 勝利条件
- **村人陣営**: 人狼を全滅させる
- **人狼陣営**: 人狼の数が村人陣営と同数以上になる

## プロジェクト構造

```
werewolf-AI-prototype/
├── src/
│   ├── index.ts          # コンソール版エントリーポイント
│   ├── server.ts         # Webサーバー (Express)
│   ├── types.ts          # 型定義
│   ├── player.ts         # プレイヤークラス（役職別）
│   ├── game.ts           # ゲーム進行ロジック
│   ├── ai-logic.ts       # AI思考ロジック
│   └── events.ts         # イベントエミッター
├── public/
│   ├── index.html        # フロントエンドHTML
│   ├── style.css         # スタイルシート
│   └── app.js            # クライアントJavaScript
├── docs/
│   ├── ARCHITECTURE.md   # アーキテクチャ設計書
│   ├── API_DESIGN.md     # API設計書（今後の実装用）
│   └── DEVELOPMENT.md    # 開発ガイド
├── package.json
├── tsconfig.json
├── Dockerfile
└── docker-compose.yml
```

## 技術スタック

### 現在
- **言語**: TypeScript
- **ランタイム**: Node.js
- **Webフレームワーク**: Express.js
- **リアルタイム通信**: Server-Sent Events (SSE)
- **フロントエンド**: Vanilla JavaScript + CSS
- **ビルドツール**: tsc (TypeScript Compiler)

### 将来的に追加予定
- **バックエンド**: Laravel (PHP)
- **フロントエンド**: React (TypeScript)
- **データベース**: MySQL
- **コンテナ**: Docker & Docker Compose

## 開発ドキュメント

詳細な情報は以下のドキュメントを参照してください：

- [アーキテクチャ設計](docs/ARCHITECTURE.md)
- [API設計書](docs/API_DESIGN.md)
- [開発ガイド](docs/DEVELOPMENT.md)

## 実行例

### ブラウザ版

1. `npm run dev` でサーバーを起動
2. ブラウザで `http://localhost:3002` を開く
3. 「ゲーム開始」ボタンをクリック
4. リアルタイムでゲームの進行を観戦

**スクリーンショット（イメージ）:**
- ダークテーマの美しいUI
- 左側にゲームログがリアルタイム表示
- 右側にプレイヤー一覧（生存状態・役職表示）
- 発言・投票・処刑・襲撃がアニメーション付きで表示

### コンソール版

```bash
$ npm run dev:console

=== 人狼ゲーム開始 ===

【配役】
プレイヤー1: 騎士 (村人陣営)
プレイヤー2: 村人 (村人陣営)
プレイヤー3: 人狼 (人狼陣営)
...

==================================================
【1日目】
==================================================

--- 昼フェーズ ---

【発言】
プレイヤー1: プレイヤー1です。騎士として村を守ります。
プレイヤー2: プレイヤー2です。村人として真実を見極めます。
...

【投票】
プレイヤー1 → プレイヤー6
プレイヤー2 → プレイヤー4
...

【処刑】プレイヤー6が処刑されました。

--- 夜フェーズ ---

【襲撃】人狼がプレイヤー9を襲撃しました。
プレイヤー9が襲撃されました...

【占い】占い師がプレイヤー2を占いました。結果: 人間

...
```

## 今後の拡張予定

### Phase 1: ブラウザ版完成 ✅
- [x] 基本ロジック実装
- [x] 全役職の実装
- [x] ゲーム進行フロー
- [x] Express.jsサーバー
- [x] リアルタイムWeb UI
- [x] Server-Sent Events

### Phase 2: AI思考の改善
- [ ] より戦略的な投票ロジック
- [ ] 役職に応じた発言パターン
- [ ] LLM統合（GPT-4, Claude等）

### Phase 3: API化
- [ ] Laravel バックエンド実装
- [ ] RESTful API設計
- [ ] WebSocket対応（リアルタイム更新）

### Phase 4: フロントエンド
- [ ] React UI実装
- [ ] リアルタイムゲーム表示
- [ ] ログビューア

### Phase 5: データ永続化
- [ ] MySQL統合
- [ ] ゲーム履歴機能
- [ ] 統計情報表示

## ライセンス

MIT License

## 作者

人狼AIプロトタイプ開発チーム

